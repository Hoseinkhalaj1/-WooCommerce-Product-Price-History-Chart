# 📈 افزونه ثبت و نمایش تاریخچه قیمت محصولات ووکامرس

این افزونه یا قطعه کد وردپرس به شما اجازه می‌دهد که تغییرات قیمت محصولات را هنگام ویرایش ذخیره کرده و نموداری از این تغییرات را در صفحه‌ی محصول نمایش دهید.

---

## ✨ امکانات

- ثبت خودکار قیمت محصول هنگام ذخیره
- جلوگیری از ذخیره قیمت تکراری
- نگهداری حداکثر ۳۰ رکورد آخر از تاریخچه قیمت
- نمایش نمودار تغییرات قیمت فقط در موبایل، دسکتاپ یا هر دو
- نمایش نمودار با استفاده از Chart.js نسخه ۴
- طراحی واکنش‌گرا و انیمیشن هنگام بارگذاری نمودار

---

## ⚙️ روش استفاده

1. کد را در فایل `functions.php` قالب خود یا یک افزونه اختصاصی قرار دهید.
2. مطمئن شوید افزونه WooCommerce فعال باشد.
3. برای نمایش نمودار در صفحه محصول از شورت‌کد زیر استفاده کنید:
`[price_chart]`



### 🎛 فیلتر نمایش بر اساس نوع دستگاه

شما می‌توانید با استفاده از ویژگی `device` مشخص کنید نمودار در چه نوع دستگاهی نمایش داده شود:

| مقدار `device` | توضیح                     |
|----------------|---------------------------|
| `all`          | نمایش در همه دستگاه‌ها     |
| `mobile`       | فقط در موبایل              |
| `desktop`      | فقط در دسکتاپ              |

#### مثال‌ها:


---

## 🧠 نحوه عملکرد

- هنگام ذخیره‌سازی محصول، اگر قیمت فعلی با آخرین قیمت ذخیره‌شده متفاوت باشد، یک رکورد جدید شامل قیمت و زمان ذخیره می‌شود.
- اگر تعداد رکوردها بیشتر از ۳۰ شود، قدیمی‌ترین‌ها حذف می‌شوند.
- اگر تعداد قیمت‌های ذخیره‌شده کمتر از ۲ باشد، نمودار نمایش داده نمی‌شود و پیام مناسب جایگزین می‌شود.

---

## 📊 درباره نمودار

- **نوع نمودار:** خطی (Line)
- **کتابخانه:** [Chart.js 4.4.4](https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js)
- **Tooltip:** شامل تاریخ و قیمت (با فونت Vazirmatn)
- **انیمیشن:** لودر قبل از نمایش نمودار

---

## 📌 نکات مهم

- نمودار فقط در صفحه‌ی تک‌محصول نمایش داده می‌شود.
- اگر قیمت محصول ثبت نشده باشد یا کمتر از دو رکورد داشته باشد، نمودار ظاهر نمی‌شود.
- همه استایل‌ها و فونت‌ها قابل ویرایش هستند.

---

## 🔮 پیشنهادات برای نسخه‌های آینده

- نمایش نمودار در پیشخوان وردپرس یا بخش گزارش‌های ووکامرس
- افزودن امکان دانلود نمودار به صورت تصویر یا فایل CSV
- افزودن پنل تنظیمات برای مدیریت رنگ، فونت و دیگر گزینه‌های ظاهری

---

## ✅ پیش‌نیازها

- WordPress نسخه 5.0 یا بالاتر
- WooCommerce نسخه 4.0 یا بالاتر
- PHP نسخه 7.2 یا بالاتر

---

## 📥 مجوز

این کد متن‌باز است و می‌توانید آن را در پروژه‌های شخصی یا تجاری خود آزادانه استفاده، تغییر و توسعه دهید.

---

ساخته‌شده با ❤️ برای کاربران حرفه‌ای ووکامرس
